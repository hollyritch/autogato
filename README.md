# 1. General

Autogato is a python package designed to compute irreducible autocatalytic subsystems in metabolic networks. It consists of the following modules:

- partitionNetwork.py
- partitionNetworkHelper.py
- partitionComputations.py
- partitionNetwork.py
- partitionAnalysis.py
- setup.py
- checkMatch.pyx

It takes sbml-models as input, currently especially BIGG-Models. Code will be adapated to accept also other models. In the usage section we describe how to use the programme. We also provide a testscript for comuting irreducible autocatalytic subsystems for the e_coli_core model. 
Currently, only Linux systems are supported due to usage of ProcessPoolExecutor. We will implement a version using ThreadPoolExecutor shortly.

# 2. Installation and Setup

Prior to usage, setup a new conda environment with Python 3 (presumably >=3.12) and install the following packages:

- SymPy
- NumPy
- SciPy
- NetowrkX
- libsbml
- Concurrent.Futures
- tqdm
- itertools
- Cython

Clone the git, activate your conda environment, and first perform the following command:

python setup.py build_ext --inplace

to compile checkMatch.pyx so that it can be imported as a normal in all partitionAnalysis.py

# 3. Usage

## 3.1 Partition the Network

First call partition Network via the following command:

- python partitionNetwork.py -i <InputXMLFile> or - python partitionNetwork.py -input <InputXMLFile>

You can provide additional options:
- -t or --threads <Number of Threads>  : Number of threads for parallel processing, default=2
- -o or --ouptur <OutDir>              : specify the directory for saving the .pkl-files, default: "./Output"
- -s or --smallMolecules <FileName>    : Specify list of species identifier for molecules that need to be removed from the network (see ./SmallMolecules/smallMoleculesEColiCore.txt for                                          an example)
- -c or --cutOff <cutOffValue>         : Minimum size of a module (a reaction network) - in terms of number of reactions - that is generated by the partitioning algorithm, default=2.

If the network decomposes into multiple strongly connected components, each of these components larger than the defined cutoff will generate a .pkl-outputfile.

## 3.2 Analyse the partitioned network

Secondly, you partition the network by using the output from the first

- python partitionAnalysis.py -x < XMLFile > -i < inputPickleFile > -s < Species >

Again you have multiple options:

- -b or --circuitBound <Max. Length elementary circuits> 
  Specify the maximum length of elementary circuits as length=len(metabolites)+len(reactions), default = 20. Unbounded search can be enforced by setting circuitBound = 2*(min(len(metabolites), len(reactions)). But be carefull due to very high memory consumption for larger networks.
- -n or --nonMetzler <True/False>
    Specify if you want non-Metzler matrices to be investigated for autocatalycity or not. Default = True. This only make sense if core == False
- -t or --threads   <Number of Threads> 
    Number of threads for parallel processing, default=2. Makes only sense if -p is set.
- -e or --equivClassBound <Max. length Equiv.Clases>
    Maximum length of equivalance classes gnerated via superimposition of elementary circuits in terms of length=len(metabolites)+len(reactions) of the Equivalence class
- -f or --fluffle
    Will enforce enumeration of fluffles. Be very carefull to do that. Memory consumption explodes very quickly. Default = False.
- -c or --cores
    Enumerates only cores. Recommended to apply first to larger networks. Consumes significantly less memory than normal mode. 
- p or --parallel
    If you want elementary circuits and assembly of larger equivalence classes parallelized, enforce -p. Default is false.
-o or --ouput <OutputDir>
    Provide output directory. Default = "./cycleData"

## 3.3 Test usage

To get familiar with the package, open test.py and modify the variables provided and call it via:

python test.py

You can add or modify the different parameters to see the specifics for your system.

     
